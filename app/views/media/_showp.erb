<%= @file_type %>
<% if options[:enclosedById] %>
<span id="<%= showp.object_name %>">
<% end %>

<%= application_attach_modifier(showp, options) do %>
<% end %>

<% if options[:showFull] %>
  <div id="modal_dialog">
  </div>

  <% if options[:mode] == 'tag' %>
    <br />
    <%= link_to "avbryt taggning", { :id => showp.id, :controller => showp.controller, :action => 'show' } %>
    <br />
    <%= render :partial => "references/connchoose", :object => showp, :locals => { :options => {} } %>

	  <div>
    <%= image_tag(url_for(:controller => showp.controller, :id => showp.id, :action => 'image'), :data => { :tagable => 'true' }, :id => 'hoolabaloo') %>
		</div>

  <% else %>
    <br />
    <%= link_to "tagga bild", { :id => showp.id, :controller => showp.controller, :action => 'show', :mode => 'tag' } %>
    <br />
    <div style="position:relative">
    <%= image_tag(url_for(:controller => showp.controller, :id => showp.id, :action => 'image'), :id => 'hoolabaloo') %>
    <% showp.positions_in_object.each do |position| %>
      <span style="position:absolute;top:<%= position.get_extra(:position).y.to_i %>px;left:<%= position.get_extra(:position).x.to_i %>px;width:<%= position.get_extra(:position).width.to_i %>px;height:<%= position.get_extra(:position).height.to_i %>px;background-color:transparent" data-hover="true">
      <span style="position:absolute;bottom:0px;left:0px;width:<%= position.get_extra(:position).width.to_i %>px;background-color:blue;display:none"><%= position.name %></span>
      </span>
    <% end %>
    </div>
	<% end %>
<% else %>
  <% thumbnail = image_tag(url_for(:controller => showp.controller, :id => showp.id, :action => 'thumb')) %>
  <%= link_to thumbnail, :controller => showp.controller, :action => 'show', :id => showp.id %>
<% end %>

<br />

<%=
  if options[:showFull]
    render :partial => "references/related", :object => showp, :locals => { :options => options }
    application_make_tabs
  end
%>

<% if options[:enclosedById] %>
</span>
<% end %>
